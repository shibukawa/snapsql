{"cel_environments":[{"index":0,"additional_variables":[{"name":"board_id","type":"int","value":1}],"container":"root"}],"cel_expressions":[{"id":"expr_001","expression":"board_id","environment_index":0,"position":{"line":67,"column":14},"type_descriptor":"int","result_type":1}],"description":"Returns a denormalised tree of a board, including all non-archived lists and their cards. Nested column aliases follow the SnapSQL hierarchy convention.","format_version":"1","function_name":"board_tree","has_ordered_result":true,"instructions":[{"op":"EMIT_STATIC","pos":"17:1","value":"SELECT b.id, b.name, b.status, b.archived_at, b.created_at, b.updated_at, l.id AS lists__id, l.board_id AS lists__board_id, l.name AS lists__name, l.stage_order AS lists__stage_order, l.position AS lists__position, l.is_archived AS lists__is_archived, l.created_at AS lists__created_at, l.updated_at AS lists__updated_at, c.id AS lists__cards__id, c.list_id AS lists__cards__list_id, c.title AS lists__cards__title, c.description AS lists__cards__description, c.position AS lists__cards__position, c.created_at AS lists__cards__created_at, c.updated_at AS lists__cards__updated_at FROM boards b LEFT JOIN lists l ON l.board_id = b.id AND l.is_archived = 0 LEFT JOIN cards c ON c.list_id = l.id WHERE b.id = "},{"op":"EMIT_EVAL","pos":"67:14","expr_index":0},{"op":"EMIT_STATIC","pos":"68:0","value":" ORDER BY l.stage_order ASC, l.position ASC, c.position ASC "},{"op":"IF_SYSTEM_LIMIT"},{"op":"EMIT_STATIC","value":" LIMIT "},{"op":"EMIT_SYSTEM_LIMIT"},{"op":"END"},{"op":"IF_SYSTEM_OFFSET"},{"op":"EMIT_STATIC","value":" OFFSET "},{"op":"EMIT_SYSTEM_OFFSET"},{"op":"END"},{"op":"EMIT_SYSTEM_FOR"}],"parameters":[{"name":"board_id","type":"int"}],"response_affinity":"one","responses":[{"name":"id","type":"int","is_nullable":true,"hierarchy_key_level":1},{"name":"name","type":"string"},{"name":"status","type":"string"},{"name":"archived_at","type":"datetime","is_nullable":true},{"name":"created_at","type":"datetime"},{"name":"updated_at","type":"datetime"},{"name":"lists__id","type":"int","is_nullable":true,"hierarchy_key_level":2},{"name":"lists__board_id","type":"int"},{"name":"lists__name","type":"string"},{"name":"lists__stage_order","type":"int"},{"name":"lists__position","type":"float"},{"name":"lists__is_archived","type":"int"},{"name":"lists__created_at","type":"datetime"},{"name":"lists__updated_at","type":"datetime"},{"name":"lists__cards__id","type":"int","is_nullable":true,"hierarchy_key_level":3},{"name":"lists__cards__list_id","type":"int"},{"name":"lists__cards__title","type":"string"},{"name":"lists__cards__description","type":"string"},{"name":"lists__cards__position","type":"float"},{"name":"lists__cards__created_at","type":"datetime"},{"name":"lists__cards__updated_at","type":"datetime"}],"statement_type":"select","table_references":[{"name":"boards","table_name":"boards","alias":"b","context":"main"},{"name":"lists","table_name":"lists","alias":"l","context":"join"},{"name":"cards","table_name":"cards","alias":"c","context":"join"}]}