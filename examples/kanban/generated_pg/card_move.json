{"cel_environments":[{"index":0,"additional_variables":[{"name":"card_id","type":"int","value":1},{"name":"target_list_id","type":"int","value":1},{"name":"target_position","type":"float","value":1.1}],"container":"root"}],"cel_expressions":[{"id":"expr_001","expression":"target_list_id","environment_index":0,"position":{"line":23,"column":15},"type_descriptor":"int","result_type":1},{"id":"expr_002","expression":"target_position","environment_index":0,"position":{"line":25,"column":16},"type_descriptor":"float","result_type":1},{"id":"expr_003","expression":"card_id","environment_index":0,"position":{"line":29,"column":12},"type_descriptor":"int","result_type":1}],"description":"Moves a card to a target list and position, using a transactional update for drag-and-drop operations.","format_version":"1","function_name":"card_move","instructions":[{"op":"EMIT_STATIC","pos":"19:1","value":"UPDATE cards SET list_id = "},{"op":"EMIT_EVAL","pos":"23:15","expr_index":0},{"op":"EMIT_STATIC","pos":"23:37","value":", position = "},{"op":"EMIT_EVAL","pos":"25:16","expr_index":1},{"op":"EMIT_STATIC","pos":"25:41","value":", updated_at = NOW() , created_at = "},{"op":"EMIT_SYSTEM_VALUE","default_value":"\u003cnil\u003e","system_field":"created_at"},{"op":"EMIT_STATIC","value":", created_by = "},{"op":"EMIT_SYSTEM_VALUE","default_value":"\u003cnil\u003e","system_field":"created_by"},{"op":"EMIT_STATIC","value":", updated_by = "},{"op":"EMIT_SYSTEM_VALUE","default_value":"\u003cnil\u003e","system_field":"updated_by"},{"op":"EMIT_STATIC","pos":"29:1","value":"WHERE id = "},{"op":"EMIT_EVAL","pos":"29:12","expr_index":2},{"op":"EMIT_STATIC","pos":"30:0","value":" RETURNING id, list_id, title, description, position, created_at, updated_at"}],"parameters":[{"name":"card_id","type":"int"},{"name":"target_list_id","type":"int"},{"name":"target_position","type":"float"}],"response_affinity":"many","responses":[{"name":"id","type":"int","is_nullable":true,"hierarchy_key_level":1},{"name":"list_id","type":"int"},{"name":"title","type":"string"},{"name":"description","type":"string"},{"name":"position","type":"float"},{"name":"created_at","type":"datetime"},{"name":"updated_at","type":"datetime"}],"statement_type":"update","table_references":[{"name":"cards","table_name":"cards","context":"main"}],"warnings":["type inference failed: failed to infer RETURNING clause: failed to infer RETURNING field: column not found in any available table: id"]}