{
  "cel_environments": [
    {
      "index": 0,
      "additional_variables": [
        {
          "name": "departments",
          "type": "[{ ... }]"
        }
      ],
      "container": "root"
    },
    {
      "index": 1,
      "additional_variables": [
        {"name": "dept", "type": "any"}
      ],
      "container": "for dept : departments"
    },
    {
      "index": 2,
      "additional_variables": [
        {"name": "sub", "type": "any"}
      ],
      "container": "for sub : dept.sub_departments"
    }
  ],
  "cel_expressions": [
    {
      "id": "expr_001",
      "expression": "departments",
      "environment_index": 0,
      "position": {
        "line": 16,
        "column": 1
      },
      "type_descriptor": {
        "department_code": "string",
        "department_name": "string",
        "sub_departments": [
    {"id": "string", "name": "string"}
        ]
      },
      "result_type": 3
    },
    {
      "id": "expr_002",
      "expression": "dept.sub_departments",
      "environment_index": 0,
      "position": {
        "line": 17,
        "column": 5
      },
      "type_descriptor": {
        "id": "string",
        "name": "string"
      },
      "result_type": 3
    },
    {
      "id": "expr_003",
      "expression": "dept.department_code + \"-\" + sub.id",
      "environment_index": 2,
      "position": {
        "line": 18,
        "column": 6
      },
      "type_descriptor": "string",
      "result_type": 1
    },
    {
      "id": "expr_004",
      "expression": "sub.name",
      "environment_index": 2,
      "position": {
        "line": 18,
        "column": 57
      },
      "type_descriptor": "string",
      "result_type": 1
    },
    {
      "id": "expr_005",
      "expression": "dept.department_code",
      "environment_index": 2,
      "position": {
        "line": 18,
        "column": 94
      },
      "type_descriptor": "string",
      "result_type": 1
    },
    {
      "id": "expr_006",
      "expression": "dept.department_name",
      "environment_index": 2,
      "position": {
        "line": 18,
        "column": 126
      },
      "type_descriptor": "string",
      "result_type": 1
    }
  ],
  "format_version": "1",
  "function_name": "insert_all_sub_departments",
  "instructions": [
    {"op": "EMIT_STATIC", "pos": "14:1", "value": "INSERT INTO sub_departments (id, name, department_code, department_name) VALUES "},
    {
      "op": "LOOP_START",
      "pos": "16:1",
      "variable": "dept",
      "collection_expr_index": 0,
      "env_index": 1
    },
    {"op": "EMIT_STATIC", "pos": "17:0", "value": " "},
    {
      "op": "LOOP_START",
      "pos": "17:5",
      "variable": "sub",
      "collection_expr_index": 1,
      "env_index": 2
    },
    {"op": "EMIT_STATIC", "pos": "18:0", "value": " ("},
    {"op": "EMIT_EVAL", "pos": "18:6", "expr_index": 2},
    {"op": "EMIT_STATIC", "pos": "18:55", "value": ", "},
    {"op": "EMIT_EVAL", "pos": "18:57", "expr_index": 3},
    {"op": "EMIT_STATIC", "pos": "18:92", "value": ", "},
    {"op": "EMIT_EVAL", "pos": "18:94", "expr_index": 4},
    {"op": "EMIT_STATIC", "pos": "18:124", "value": ", "},
    {"op": "EMIT_EVAL", "pos": "18:126", "expr_index": 5},
    {"op": "EMIT_STATIC", "pos": "18:166", "value": ")\n    "},
    {"op": "LOOP_END", "pos": "18:166", "env_index": 1},
    {"op": "EMIT_STATIC", "pos": "20:0", "value": "\n"},
    {"op": "LOOP_END", "pos": "18:166", "env_index": 0},
    {"op": "EMIT_STATIC", "pos": "21:0"}
  ],
  "parameters": [
    {"name": "departments", "type": "any"}
  ],
  "response_affinity": "none",
  "table_references": [
    {"name": "sub_departments", "context": "main"}
  ],
  "warnings": [
    "type inference failed: no database schema provided"
  ]
}